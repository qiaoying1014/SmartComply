@model SmartComply.Models.CorrectiveAction
@{
    ViewData["Title"] = "Corrective Action Details";
}

<!-- Card Structure -->
<div class="card">
    <!-- Breadcrumb Navigation -->
    <div class="card-header p-5">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb mb-0">
                <li class="breadcrumb-item">
                    <a href="@Url.Action("Index", "Manager")" class="btn btn-link text-primary p-0">Home</a>
                </li>
                <li class="breadcrumb-item">
                    <a href="@Url.Action("Index", "ViewAudit")" class="btn btn-link text-primary p-0">Audit List</a>
                </li>
                <li class="breadcrumb-item">
                    <!-- Dynamic AuditDetails link with auditId -->
                    <a href="@Url.Action("AuditDetails", "ViewAudit", new { auditId = Model.AuditId })" class="btn btn-link text-primary p-0">Audit Details</a>
                </li>
                <li class="breadcrumb-item active" aria-current="page">Corrective Action Details</li>
            </ol>
        </nav>
    </div>

    <!-- Card Header for Corrective Action Title -->
    <div class="card-header p-4">
        <h5 class="mb-0">@Model.Audit?.AuditName</h5>
    </div>

    <div class="card-body p-4">
        <!-- Corrective Action Details Section -->
        <div class="mb-4">
            <p><strong>Auditor:</strong> @Model.Audit?.Staff?.StaffName</p>
            <p><strong>Category:</strong> @Model.Audit?.Category?.CategoryName</p>
            <p><strong>Description:</strong> @Model.Description</p>
            <p><strong>Root Cause:</strong> @Model.RootCause</p>
            <p><strong>Proposed Action:</strong> @Model.ProposedAction</p>
            <p><strong>Responsible Person:</strong> @Model.ResponsiblePerson</p>
            <p><strong>Target Date:</strong> @Model.TargetDate.ToShortDateString()</p>
            <p><strong>Completion Date:</strong> @Model.CompletionDate?.ToShortDateString()</p>
            <p><strong>Status:</strong> @Model.Status</p>
            <p><strong>Remarks:</strong> @Model.Remarks</p>
        </div>

        <hr />

        <!-- Before and After Photos Section -->
        <h4 class="mt-4">Photos</h4>
        <div class="row">
            <div class="col-md-6">
                <strong>Before Photo:</strong><br />
                @if (!string.IsNullOrWhiteSpace(Model.BeforeActionPhotoPath))
                {
                    <img src="@Url.Content(Model.BeforeActionPhotoPath)" class="img-fluid border" style="max-width: 100%;" alt="Before Photo" />
                }
                else
                {
                    <p class="text-muted">(No photo uploaded)</p>
                }
            </div>
            <div class="col-md-6">
                <strong>After Photo:</strong><br />
                @if (!string.IsNullOrWhiteSpace(Model.AfterActionPhotoPath))
                {
                    <img src="@Url.Content(Model.AfterActionPhotoPath)" class="img-fluid border" style="max-width: 100%;" alt="After Photo" />
                }
                else
                {
                    <p class="text-muted">(No photo uploaded)</p>
                }
            </div>
        </div>
    </div>
</div>
